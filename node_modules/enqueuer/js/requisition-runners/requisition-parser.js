"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dynamic_modules_manager_1 = require("../plugins/dynamic-modules-manager");
const requisition_validator_1 = require("./requisition-validator");
class RequisitionParser {
    parse(content) {
        let fileContent = dynamic_modules_manager_1.DynamicModulesManager
            .getInstance().getObjectParserManager()
            .tryToParseWithParsers(content, ['yml', 'json']);
        const requisition = Array.isArray(fileContent) ? { requisitions: fileContent } : fileContent;
        const requisitionValidator = new requisition_validator_1.RequisitionValidator();
        if (!requisitionValidator.validate(requisition)) {
            throw '\'' + content + '\' is not a valid requisition. ' + requisitionValidator.getErrorMessage();
        }
        return requisition;
    }
}
exports.RequisitionParser = RequisitionParser;
