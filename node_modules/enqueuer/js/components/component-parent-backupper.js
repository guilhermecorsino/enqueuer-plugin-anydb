"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class ComponentParentBackupper {
    constructor() {
        this.parentMap = {};
    }
    removeParents(requisition) {
        this.parentMap[requisition.id] = requisition.parent;
        delete requisition.parent;
        (requisition.requisitions || [])
            .map(child => this.removeParents(child));
        (requisition.publishers || [])
            .concat(requisition.subscriptions || [])
            .map(leaf => {
            this.parentMap[leaf.id] = leaf.parent;
            delete leaf.parent;
        });
    }
    putParentsBack(requisition) {
        requisition.parent = this.parentMap[requisition.id];
        (requisition.requisitions || [])
            .map(child => this.putParentsBack(child));
        (requisition.publishers || [])
            .concat(requisition.subscriptions || [])
            .map(leaf => leaf.parent = this.parentMap[leaf.id]);
    }
}
exports.ComponentParentBackupper = ComponentParentBackupper;
